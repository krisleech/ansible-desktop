---
- name: Install XClip (copy/paste for the terminal)
  apt: name=xclip state=installed

- name: Check NeoVIM installed
  stat: path=/usr/bin/nvim
  register: stat_nvim

- name: Add PPA for NeoVIM
  sudo: true
  apt_repository: repo='ppa:neovim-ppa/unstable' state=present
  when: stat_nvim.stat.exists == False

- name: Install NeoVIM
  sudo: true
  apt: name=neovim state=installed
  when: stat_nvim.stat.exists == False

- name: Add NeoVIM configuration
  sudo: false
  git: repo=https://github.com/krisleech/neovim-config.git
       dest=/home/{{user}}/.config/nvim
       accept_hostkey=yes
  when: stat_nvim.stat.exists == False

# FIXME: fails due to need for user input on fresh install
# - name: Install NeoVIM plugins
#   sudo: false
#   command: nvim -c "PlugInstall | qa!"
#   when: stat_nvim.stat.exists == False

